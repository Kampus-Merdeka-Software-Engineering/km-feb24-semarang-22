<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart.js with Select Option</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <label for="mySelect">Pilih kolom data:</label>
    <select id="mySelect">
        <option value="kolom1">Kolom 1</option>
        <option value="kolom2">Kolom 2</option>
        <option value="kolom3">Kolom 3</option>
    </select>

    <canvas id="myChart1" width="400" height="200"></canvas>
    <canvas id="myChart2" width="400" height="200"></canvas>

    <script>
        // script.js

// Inisialisasi variabel untuk menyimpan data dari JSON
let jsonData = [];

// Fungsi untuk mengambil data dari file JSON
async function fetchData() {
    const response = await fetch('data.json');
    jsonData = await response.json();
    // Inisialisasi chart pertama kali dengan data dari kolom pertama
    updateCharts('kolom1');
}

// Fungsi untuk menghitung jumlah baris dengan nilai tertentu
function countRowsWithValue(column, value) {
    return jsonData.filter(row => row[column] === value).length;
}

// Fungsi untuk mengupdate chart berdasarkan kolom yang dipilih
function updateCharts(selectedColumn) {
    // Hitung jumlah baris dengan nilai 20 untuk kolom yang dipilih
    const count = countRowsWithValue(selectedColumn, 20);

    // Update data pada chart pertama
    myChart1.data.datasets[0].data = [count];
    myChart1.update();

    // Update data pada chart kedua (misalnya menampilkan nilai yang berbeda)
    // Misalnya kita hanya menggandakan jumlah baris dengan nilai 20
    myChart2.data.datasets[0].data = [count * 2];
    myChart2.update();
}

// Inisialisasi chart dengan Chart.js
const ctx1 = document.getElementById('myChart1').getContext('2d');
const myChart1 = new Chart(ctx1, {
    type: 'bar',
    data: {
        labels: ['Jumlah Baris dengan Nilai 20'], // Label x-axis
        datasets: [{
            label: 'Jumlah',
            data: [], // Data akan diisi saat kolom dipilih
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

const ctx2 = document.getElementById('myChart2').getContext('2d');
const myChart2 = new Chart(ctx2, {
    type: 'bar',
    data: {
        labels: ['Jumlah Baris dengan Nilai 20 (x2)'], // Label x-axis
        datasets: [{
            label: 'Jumlah (x2)',
            data: [], // Data akan diisi saat kolom dipilih
            backgroundColor: 'rgba(153, 102, 255, 0.2)',
            borderColor: 'rgba(153, 102, 255, 1)',
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Ambil elemen select
const selectElement = document.getElementById('mySelect');

// Tambahkan event listener untuk mendeteksi perubahan nilai pada select
selectElement.addEventListener('change', function() {
    // Ambil nilai dari opsi yang dipilih
    const selectedValue = selectElement.value;
    // Update chart dengan kolom yang dipilih
    updateCharts(selectedValue);
});

// Panggil fungsi fetchData untuk mengambil data dari JSON dan inisialisasi chart
fetchData();

    </script>
</body>
</html>
